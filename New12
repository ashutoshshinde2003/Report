// ======== File Browse Null Check Before Submit ========
// Works for all submit buttons and shows native APEX message
document.addEventListener("DOMContentLoaded", function () {
  
  // Intercept APEX submit
  apex.page.submit = (function (origSubmit) {
    return function (request) {

      // --- get the File Browse item value ---
      var fileItem = $v("P21_FILE_BROWSE"); // change this to your item name
      var isEmpty = (fileItem === null || fileItem === undefined || fileItem.trim() === "");

      // --- if empty file ---
      if (isEmpty) {
        // Clear previous messages first
        apex.message.clearErrors();

        // Show APEX-style error at page top
        apex.message.showErrors([
          {
            type: "error",
            location: "page",
            message: "Please select a file before submitting.",
            unsafe: false
          }
        ]);

        // Stop submit
        return;
      }

      // Otherwise, continue with normal submit
      origSubmit(request);
    };
  })(apex.page.submit);

});