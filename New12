apex.page.beforeSubmit(function () {
  const fname = $v("P1040_FILE_NAME");
  if (!fname || fname.trim() === "") {
    apex.event.gCancelFlag = true;
    apex.message.showErrors([{
      type: "error",
      location: "page",
      message: "Please select a file before submitting."
    }]);
    return false;
  }
});